{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}Client for Omero search engine - Index{% endblock %}

{% block app_content %}

<div class="page-header">
    <h4>Query Submission Form</h4>
</div>
<br><br>

<div id="query">

  <div id="resources" style="display: none" >
 <p  align="center">
        <div class="col-md-2">
          <h3>Search criteria</h3>
           <form class="form-horizontal" method="POST" id="reg-form">
               {{ wtf.quick_form(form) }}
           </form>
        <input type="submit"  id="addAndCondition" onclick="addAndConditionFunction()" name="addAndCondition" value="And">
      <input type="submit"  id="addOrcondition" onclick="addOrConditionFunction()" name="addOrCondition" value="Or">
      </div>
    </p>
</div>

 <div id ="conditions">
<div class="col-md-4">
<h5>AND Group</h5>
  <table id="and_group" class="table table-striped">
    <thead>
      <tr>
        <th>Attribute</th>
        <th>Operator</th>
        <th>Value</th>
        <th>
            <button id="band" class="btn add-more" type="button"></button>
        </th>
      </tr>
    </thead>
  </table>
</div>
<br>
<br>
<div class="col-md-4">
<h5>OR Group</h5>
 <table id="or_group" class="table table-striped">
    <thead>
      <tr>
        <th>Attribute</th>
        <th>Operator</th>
        <th>Value</th>
        <th>
            <button id="bor" class="btn add-more" type="button"></button>
        </th>
      </tr>
    </thead>
  </table>
</div>
<br>
<button id="submit_"  onclick="submitQuery()" type="button">Submit Query</button>
</div>
</div>
<br>
<br>
<div id="results" class="col-md-4" style="display: none"  >
    <h4>Results</h4>
    <br>
    <label id="no_images"></label>
    <label id="query_id"></label>
    <br>



</div>
      <div id="myGrid_2" style="height: 600px;width:1200px;" class="ag-theme-alpine"></div>

    <br>
   <div id="load_results_buttons", style="display: none", class="col-md-7" >
       <table id="loads_results_table" class="table table-striped">
    <thead>
      <tr>
        <th><button id="loadMoreResults"  onclick="loadMoreResultsFunction()" type="button">Load More Results</button></th>
      </tr>
    </thead>
       </table>
       </div>
   <br>
         <button id="exportResults"  onclick="exportToCSV()" type="button">Export Results (CSV)</button>
     <br>
</div>
<script src="/static/js/resource_handeler.js"></script>
<script>
      var resources_data = {{ resources_data|tojson }};
      var query_id= {{ task_id|tojson }};
      var submitqueryurl = "{{ url_for('main.submit_query') }}";
      var queryresultsurl = "{{ url_for('main.queryresults') }}";

      $(document).ajaxStart(function ()
{
    $('body').addClass('wait');

}).ajaxComplete(function () {

    $('body').removeClass('wait');

});

</script>

{% endblock %}
